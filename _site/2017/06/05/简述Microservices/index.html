<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--><!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8"><![endif]--><!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9"><![endif]--><!--[if gt IE 8]><!--><html class="no-js">
<!--<![endif]--> <head> <meta charset="UTF-8"> <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <title>简述 Microservices – ATERRO</title> <meta name="description" content="Though usually reliable,I may let one or two important things slip through my fingers for no apparent reason."> <meta name="keywords" content="Microservices"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="/assets/img/logo1.png"> <meta name="twitter:title" content="简述 Microservices"> <meta name="twitter:description" content="自2014年始，Microservices（微服务）一词越来越火爆。那什么是 Microservices？Microservices 架构与传统的架构有什么区别？何时应该采用 Microservices？"> <!-- Open Graph --> <meta property="og:locale" content="cn"> <meta property="og:type" content="article"> <meta property="og:title" content="简述 Microservices"> <meta property="og:description" content="自2014年始，Microservices（微服务）一词越来越火爆。那什么是 Microservices？Microservices 架构与传统的架构有什么区别？何时应该采用 Microservices？"> <meta property="og:url" content="/2017/06/05/%E7%AE%80%E8%BF%B0Microservices/"> <meta property="og:site_name" content="ATERRO"> <meta property="og:image" content="/assets/img/logo1.png"> <link rel="canonical" href="/2017/06/05/%E7%AE%80%E8%BF%B0Microservices/"> <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="ATERRO Feed"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- CSS --> <link rel="stylesheet" href="/assets/css/main.css"> <!-- JS --> <script src="/assets/js/modernizr-3.3.1.custom.min.js"></script> <!-- Favicons --> <link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"> <link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"> <link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"> <link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"> <link rel="shortcut icon" type="image/png" href="/favicon.png"> <link rel="shortcut icon" href="/favicon.ico"> <!-- Background Image --> <style type="text/css">body {background-image:url(/assets/img/placeholder.jpg); background-repeat: no-repeat; background-size: cover; }</style> <!-- Post Feature Image --> </head> <body> <nav id="dl-menu" class="dl-menuwrapper" role="navigation"> <button class="dl-trigger">Open Menu</button> <ul class="dl-menu"> <li><a href="/">Home</a></li> <li> <a href="#">About</a> <ul class="dl-submenu"> <li> <img src="/assets/img/logo1.png" alt="ATERRO photo" class="author-photo"> <h4>ATERRO</h4> <p>Though usually reliable,I may let one or two important things slip through my fingers for no apparent reason.</p> </li> <li><a href="/about/"><span class="btn btn-inverse">Learn More</span></a></li> <li> <a href="mailto:aterro@yeah.net" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-envelope-square"></i> Email</a> </li> <li> <a href="http://facebook.com/meijw.aterro" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-facebook-square"></i> Facebook</a> </li> <li> <a href="http://github.com/meijw" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-github"></i> Github</a> </li> <li> <a href="http://www.weibo.com/aterro" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-weibo"></i> Weibo</a> </li> </ul>
<!-- /.dl-submenu --> </li> <li> <a href="#">Posts</a> <ul class="dl-submenu"> <li><a href="/posts/">All Posts</a></li> <li><a href="/tags/">All Tags</a></li> </ul> </li> <li><a href="/projects/">Projects</a></li> </ul>
<!-- /.dl-menu --> </nav><!-- /.dl-menuwrapper --> <!-- Header --> <header class="header" role="banner"> <div class="wrapper animated fadeIn"> <div class="content"> <div class="post-title "> <h1>简述 Microservices</h1> <h4>05 Jun 2017</h4> <p class="reading-time"> <i class="fa fa-clock-o"></i> Reading time ~1 minute </p>
<!-- /.entry-reading-time --> <a class="btn zoombtn" href="/posts/"> <i class="fa fa-chevron-left"></i> </a> </div> <hr> <ul id="markdown-toc"> <li>
<a href="#%E7%AE%80%E8%BF%B0-microservices" id="markdown-toc-简述-microservices">简述 Microservices</a> <ul> <li>
<a href="#%E4%BB%80%E4%B9%88%E6%98%AF-microservices" id="markdown-toc-什么是-microservices">什么是 Microservices</a> <ul> <li><a href="#microservices-%E5%8C%85%E5%90%AB%E5%A6%82%E4%B8%8B%E7%89%B9%E5%BE%81" id="markdown-toc-microservices-包含如下特征">Microservices 包含如下特征：</a></li> </ul> </li> <li><a href="#msa-vs-soa" id="markdown-toc-msa-vs-soa">MSA vs. SOA</a></li> <li><a href="#%E4%BD%95%E6%97%B6%E9%87%87%E7%94%A8-microservices" id="markdown-toc-何时采用-microservices">何时采用 Microservices</a></li> <li><a href="#%E5%8F%82%E8%80%83" id="markdown-toc-参考">参考</a></li> </ul> </li> </ul> <hr> <h1 id="简述-microservices">简述 Microservices</h1> <p>自2014年始，Microservices（微服务）一词越来越火爆。那什么是 Microservices？Microservices 架构与传统的架构有什么区别？何时应该采用 Microservices？</p> <p>本文，就针对上述提到的问题，来简单介绍下 Microservices。</p> <h2 id="什么是-microservices">什么是 Microservices</h2> <p>微服务的诞生并非偶然: 领域驱动设计指导我们如何分析并模型化复杂的业务；敏捷方法论帮助我们消除浪费，快速反馈；持续交付促使我们构建更快、更可靠、更频繁的软件部署和交付能力；虚拟化和基础设施自动化(Infrastructure As Code)则帮助我们简化环境的创建、安装；DevOps 文化的流行以及特性团队的出现，使得小团队更加全功能化。这些都是推动微服务诞生的重要因素。</p> <p>实际上，业界对于微服务本身并没有一个严格的定义。James Lewis 和 Martin Fowler 对 Microservices 架构做了如下定义：</p> <p><em>简言之，Microservices 架构风格就像是把小的服务开发成单一应用的形式， 运行在其自己的进程中，并采用轻量级的机制进行通信（一般是 HTTP 资源 API）。这些服务都是围绕业务能力来构建，通过全自动部署工具来实现独立部署。这些服务，其可以使用不同的编程语言和不同的数据存储技术，并保持最小化集中管理。</em></p> <h3 id="microservices-包含如下特征">Microservices 包含如下特征：</h3> <ul> <li> <p><strong>组件以服务形式来提供：</strong> 正如其名，微服务也是面向服务的。</p> </li> <li> <p><strong>围绕业务功能进行组织：</strong> 微服务更倾向于围绕业务功能对服务结构进行划分、拆解。这样的服务，是针对业务领域有着关完整实现的软件，它包含使用接口、持久存储、以及对应的交互。因此团队应该是跨职能的，包含完整的开发技术：用户体验、数据库、以及项目管理。</p> </li> <li> <p><strong>产品不是项目：</strong> 传统的开发模式，是至力于提供一些被认为是完整的软件。一旦开发完成，软件将移交给维护或者实施部门，然后，开发组就可以解散掉了。而微服务要求开发团队对软件产品的整个生命周期负责。这要求开发者每天都关注软件产品的运行情况，并与用户联系的更紧密，同时承担一些售后支持。越小的服务粒度越容易促进用户与服务提供商之前的关系。Amazon 的理念就是“You build, you run it”，这也正是 DevOps 的文化理念。</p> </li> <li> <p><strong>强化终端及弱化通道：</strong> 微服务的应用致力松耦合和高内聚，它们更喜欢简单的REST 风格，而不是复杂的协议（如WS或者BPEL或者集中式框架）。或者采用轻量级消息总线（如 RabbitMQ 或 ZeroMQ 等）来发布消息。</p> </li> <li> <p><strong>分散治理：</strong> 这是跟传统的集中式管理很大区别的地方。微服务把整体式框架中的组件，拆分成不同的服务，在构建它们时将会有更多的选择。</p> </li> <li> <p><strong>分散数据管理：</strong> 当整体式的应用使用单一逻辑数据库对数据持久化时，企业通常选择在应用的范围内使用一个数据库。微服务让每个服务管理自己的数据库：无论是相同数据库的不同实例，或者是不同的数据库系统。</p> </li> <li> <p><strong>基础设施自动化：</strong> 云计算，特别是 AWS 的发展，减少了构建、发布、运维微服务的复杂性。微服务的团队更加依赖于基础设施的自动化，毕竟发布工作相当的无趣。近些年开始火爆的 Docker 也是一个不错的选择。</p> </li> <li> <p><strong>容错性设计：</strong> 任务服务都可能因为供应商的不可靠而故障。微服务应为每个应用的服务及数据中心提供日常故障检测和恢复。</p> </li> <li> <p><strong>改进设计：</strong> 由于设计会不断更改，微服务所提供的服务应该能够替换或者报废，而不是要长久的发展的。</p> </li> </ul> <h2 id="msa-vs-soa">MSA vs. SOA</h2> <p>微服务架构（MSA）与 面向服务架构（SOA）相似之处，比如，都是面向服务。通常 SOA 意味着大而全的整体单块架构系统(monolithic)的解决方案。这让设计、开发、测试、发布都增加了难度，其中任何细小的代码变更，都将导致整个系统的需要重新测试，部署。而微服务架构恰恰把所有服务都打散，设置合理的颗粒度，各个服务间保持低耦合，每个服务都在其完整的生命周期中存活，互相之间影响降到最低。</p> <p>SOA 需要对整个系统进行规范，而 MSA 每个服务都可以有自己的开发语言、开发方式，灵活性大大提高。</p> <h2 id="何时采用-microservices">何时采用 Microservices</h2> <p>对于分布式设计来说，分布式第一定律是“尽量不要使用分布式”。因为系统的分布式一定会带来性能的开销。</p> <p>微服务使得开发变得更简单，快捷了。以前开发人员耗费时间来搭建环境、熟悉代码结构，在微服务的世界里会简单许多。但是，微服务带来了一系列的非功能性需求，比如说事务、服务治理（注册，发现，负载，路由，认证授权，隔离）、监控（日志，性能监控，告警，调用链路）、部署、测试等。微服务依赖于“基础设施自动化”。</p> <p>微服务不是“银弹”，何时采用微服务还需考虑企业自身的需求。</p> <h2 id="参考">参考</h2> <ul> <li>http://www.infoq.com/cn/articles/enterprise-core-systems-transformation-practice/</li> <li>http://martinfowler.com/articles/microservices.html</li> </ul> <div class="entry-meta"> <br> <hr> <span class="entry-tags"><a href="/tags/#Microservices" title="Pages tagged Microservices" class="tag"><span class="term">Microservices</span></a></span> <span class="social-share"> <a href="https://www.facebook.com/sharer/sharer.php?u=/2017/06/05/%E7%AE%80%E8%BF%B0Microservices/" title="Share on Facebook" class="tag"> <span class="term"><i class="fa fa-facebook-square"></i> Share</span> </a> <a href="https://twitter.com/intent/tweet?text=/2017/06/05/%E7%AE%80%E8%BF%B0Microservices/" title="Share on Twitter" class="tag"> <span class="term"><i class="fa fa-twitter-square"></i> Tweet</span> </a> <a href="https://plus.google.com/share?url=/2017/06/05/%E7%AE%80%E8%BF%B0Microservices/" title="Share on Google+" class="tag"> <span class="term"><i class="fa fa-google-plus-square"></i> +1</span> </a> </span> <div style="clear:both"></div> </div> </div> </div> </header> <!-- JS --> <script src="/assets/js/jquery-1.12.0.min.js"></script> <script src="/assets/js/jquery.dlmenu.min.js"></script> <script src="/assets/js/jquery.goup.min.js"></script> <script src="/assets/js/jquery.magnific-popup.min.js"></script> <script src="/assets/js/jquery.fitvid.min.js"></script> <script src="/assets/js/scripts.js"></script> <!-- MathJax --> <script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </body> </html>
